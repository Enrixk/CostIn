(function(b){function E(a,c){function F(a){return b.isArray(f.readonly)?(a=b(".dwwl",l).index(a),f.readonly[a]):f.readonly}function o(a){var b='<div class="dw-bf">',c=1,f;for(f in V[a])0==c%20&&(b+='</div><div class="dw-bf">'),b+='<div class="dw-li dw-v" data-val="'+f+'" style="height:'+y+"px;line-height:"+y+'px;"><div class="dw-i">'+V[a][f]+"</div></div>",c++;return b+"</div>"}function ga(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,
b.scrollHeight,b.offsetHeight)}function v(a){p=b(".dw-li",a).index(b(".dw-v",a).eq(0));z=b(".dw-li",a).index(b(".dw-v",a).eq(-1));G=b(".dw-ul",l).index(a);H=y;t=j}function ha(a){var b=f.headerText;return b?"function"==typeof b?b.call(L,a):b.replace(/\{value\}/i,a):""}function D(){j.temp=Q&&(null!==j.val&&j.val!=r.val()||!r.val().length)||null===j.values?f.parseValue(r.val()||"",j):j.values.slice(0);j.setValue(!0)}function W(a,f,c,d){!1!==B("validate",[l,f])&&b(".dw-ul",l).each(function(c){var i=b(this),
k=b('.dw-li[data-val="'+j.temp[c]+'"]',i),h=b(".dw-li",i).index(k),q=c==f||void 0===f;if(!k.hasClass("dw-v")){for(var e=k,l=0,g=0;e.prev().length&&!e.hasClass("dw-v");)e=e.prev(),l++;for(;k.next().length&&!k.hasClass("dw-v");)k=k.next(),g++;(g<l&&g&&2!==d||!l||!e.hasClass("dw-v")||1==d)&&k.hasClass("dw-v")?h+=g:(k=e,h-=l)}if(!k.hasClass("dw-sel")||q)j.temp[c]=k.attr("data-val"),b(".dw-sel",i).removeClass("dw-sel"),k.addClass("dw-sel"),j.scroll(i,c,h,a)});j.change(c)}function A(a){if(!("inline"==f.display||
M===b(window).width()&&aa===b(window).height()&&!0!==a)){var c,k,d,i,h,j,q=0,e=0,g=b(window).scrollTop(),F=b(".dwwr",l),a=b(".dw",l),m={},o;h=void 0===f.anchor?r:f.anchor;M=b(window).width();aa=b(window).height();C=(C=window.innerHeight)||aa;if("modal"==f.display||"bubble"==f.display)b(".dwc",l).each(function(){c=b(this).outerWidth(!0);q+=c;e=c>e?c:e}),c=q>M?e:q,F.width(c+1);N=F.outerWidth();R=a.outerHeight();j=a.outerHeight(!0);if("modal"==f.display)k=(M-N)/2,d=g+(C-R)/2;else if("bubble"==f.display){var n=
h.offset(),F=b(".dw-arr",l),p=b(".dw-arrw-i",l);i=h.outerWidth();h=h.outerHeight();k=n.left-(a.outerWidth(!0)-i)/2;k=k>M-N?M-(N+20):k;k=0<=k?k:20;d=n.top-(R+3);d<g||n.top>g+C?(a.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),d=n.top+h+3,o=d+j>g+C||n.top>g+C):a.removeClass("dw-bubble-bottom").addClass("dw-bubble-top");g=n.left+i/2-(k+(N-p.outerWidth())/2);g>p.outerWidth()&&(g=p.outerWidth());F.css({left:g})}else m.width="100%","top"==f.display?d=g:"bottom"==f.display&&(d=g+C-R,d=0<=d?d:
0);m.top=0>d?0:d;m.left=k;a.css(m);b(".dwo, .dw-persp",l).height(0).height(ga());o&&setTimeout(function(){b(window).scrollTop(d+j-C)},I?350:0)}}function B(a,f){var d;f.push(j);b.each([X,c],function(b,c){c[a]&&(d=c[a].apply(L,f))});return d}function E(a){var b=+a.data("pos")+1;Y(a,b>z?p:b,1)}function P(a){var b=+a.data("pos")-1;Y(a,b<p?z:b,2)}var da,y,J,l,M,C,aa,N,R,I,j=this,ba=b.mobiscroll,L=a,r=b(L),ca,ea,f=m({},fa),X={},V=[],S={},Q=r.is("input"),T=!1;j.enable=function(){f.disabled=!1;Q&&r.prop("disabled",
!1)};j.disable=function(){f.disabled=!0;Q&&r.prop("disabled",!0)};j.scroll=function(a,b,c,f,d,k){function h(){clearInterval(S[b]);S[b]=void 0;a.data("pos",c).closest(".dwwl").removeClass("dwa")}var j=(da-c)*y,g,k=k||U;a.attr("style",(f?e+"-transition:all "+f.toFixed(1)+"s ease-out;":"")+(i?e+"-transform:translate3d(0,"+j+"px,0);":"top:"+j+"px;"));S[b]&&h();f&&void 0!==d?(g=0,a.closest(".dwwl").addClass("dwa"),S[b]=setInterval(function(){g+=0.1;a.data("pos",Math.round((c-d)*Math.sin(g/f*(Math.PI/2))+
d));g>=f&&(h(),k())},100),B("onAnimStart",[b,f])):(a.data("pos",c),k())};j.setValue=function(a,b,c,d){d||(j.values=j.temp.slice(0));T&&a&&W(c);b&&(J=f.formatResult(j.temp),j.val=J,Q&&r.val(J).trigger("change"))};j.validate=function(a,b){W(0.2,a,!0,b)};j.change=function(a){J=f.formatResult(j.temp);"inline"==f.display?j.setValue(!1,a):b(".dwv",l).html(ha(J));a&&B("onChange",[J])};j.changeWheel=function(a,c){if(l){var d=0,k,h,g=a.length;for(k in f.wheels)for(h in f.wheels[k]){if(-1<b.inArray(d,a)&&(V[d]=
f.wheels[k][h],b(".dw-ul",l).eq(d).html(o(d)),g--,!g)){A(!0);W(c);return}d++}}};j.show=function(a){if(f.disabled||T)return!1;"top"==f.display&&(I="slidedown");"bottom"==f.display&&(I="slideup");D();B("onBeforeShow",[l]);var c=0,k,i="",e="",m="";I&&!a&&(e='<div class="dw-persp">',m="</div>",i="dw-"+I+" dw-in");e='<div class="dw-trans '+f.theme+" dw-"+f.display+" dw-"+f.preset+'">'+("inline"==f.display?'<div class="dw dwbg dwi"><div class="dwwr">':e+'<div class="dwo"></div><div class="dw dwbg '+i+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr">'+
(f.headerText?'<div class="dwv"></div>':""));for(a=0;a<f.wheels.length;a++){e+='<div class="dwc'+("scroller"!=f.mode?" dwpm":" dwsc")+(f.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(k in f.wheels[a])V[c]=f.wheels[a][k],e+='<td><div class="dwwl dwrc dwwl'+c+'">'+("scroller"!=f.mode?'<div class="dwwb dwwbp" style="height:'+y+"px;line-height:"+y+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+y+"px;line-height:"+y+'px;"><span>&ndash;</span></div>':
"")+'<div class="dwl">'+k+'</div><div class="dww" style="height:'+f.rows*y+"px;min-width:"+f.width+'px;"><div class="dw-ul">',e+=o(c),e+='</div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>',c++;e+="</tr></table></div></div>"}e+=("inline"!=f.display?'<div class="dwbc'+(f.button3?" dwbc-p":"")+'"><span class="dwbw dwb-s"><span class="dwb">'+f.setText+"</span></span>"+(f.button3?'<span class="dwbw dwb-n"><span class="dwb">'+f.button3Text+"</span></span>":"")+'<span class="dwbw dwb-c"><span class="dwb">'+
f.cancelText+"</span></span></div>"+m:'<div class="dwcc"></div>')+"</div></div></div>";l=b(e);W();B("onMarkupReady",[l]);"inline"!=f.display?(l.appendTo("body"),setTimeout(function(){l.removeClass("dw-trans").find(".dw").removeClass(i)},350)):r.is("div")?r.html(l):l.insertAfter(r);T=!0;"inline"!=f.display&&(b(".dwb-s span",l).click(function(){if(j.hide(false,"set")!==false){j.setValue(false,true);B("onSelect",[j.val])}}),b(".dwb-c span",l).click(function(){j.cancel()}),f.button3&&b(".dwb-n span",
l).click(f.button3),f.scrollLock&&l.bind("touchmove",function(a){R<=C&&N<=M&&a.preventDefault()}),b("input,select,button").each(function(){b(this).prop("disabled")||b(this).addClass("dwtd").prop("disabled",true)}),A(!0),b(window).bind("resize.dw",A));l.delegate(".dwwl","DOMMouseScroll mousewheel",function(a){if(!F(this)){a.preventDefault();var a=a.originalEvent,a=a.wheelDelta?a.wheelDelta/120:a.detail?-a.detail/3:0,c=b(".dw-ul",this),d=+c.data("pos"),d=Math.round(d-a);v(c);Y(c,d,a<0?1:2)}}).delegate(".dwb, .dwwb",
g,function(){b(this).addClass("dwb-a")}).delegate(".dwwb",g,function(a){var c=b(this).closest(".dwwl");if(!F(c)&&!c.hasClass("dwa")){a.preventDefault();a.stopPropagation();var d=c.find(".dw-ul"),k=b(this).hasClass("dwwbp")?E:P;K=true;v(d);clearInterval(O);O=setInterval(function(){k(d)},f.delay);k(d)}}).delegate(".dwwl",g,function(a){a.preventDefault();if(!u&&!F(this)&&!K&&f.mode!="clickpick"){u=true;s=b(".dw-ul",this);s.closest(".dwwl").addClass("dwa");h=+s.data("pos");v(s);d=S[G]!==void 0;x=Z(a);
q=new Date;w=x;j.scroll(s,G,h)}});B("onShow",[l,J]);ca.init(l,j)};j.hide=function(a,c){if(!1===B("onClose",[J,c]))return!1;b(".dwtd").prop("disabled",!1).removeClass("dwtd");r.blur();l&&("inline"!=f.display&&I&&!a?(b(".dw",l).addClass("dw-"+I+" dw-out"),setTimeout(function(){l.remove();l=null},350)):(l.remove(),l=null),T=!1,b(window).unbind(".dw"))};j.cancel=function(){!1!==j.hide(!1,"cancel")&&B("onCancel",[j.val])};j.init=function(a){ca=m({defaults:{},init:U},ba.themes[a.theme||f.theme]);ea=ba.i18n[a.lang||
f.lang];m(c,a);m(f,ca.defaults,ea,c);j.settings=f;r.unbind(".dw");if(a=ba.presets[f.preset])X=a.call(L,j),m(f,X,c),m($,X.methods);da=Math.floor(f.rows/2);y=f.height;I=f.animate;void 0!==r.data("dwro")&&(L.readOnly=n(r.data("dwro")));T&&j.hide();"inline"==f.display?j.show():(D(),Q&&f.showOnFocus&&(r.data("dwro",L.readOnly),L.readOnly=!0,r.bind("focus.dw",function(){j.show()})))};j.values=null;j.val=null;j.temp=null;j.init(c)}function P(a){for(var b in a)if(void 0!==c[a[b]])return!0;return!1}function Z(a){var b=
a.originalEvent,c=a.changedTouches;return c||b&&b.changedTouches?b?b.changedTouches[0].pageY:c[0].pageY:a.pageY}function n(a){return!0===a||"true"==a}function v(a,b,c){a=a>c?c:a;return a<b?b:a}function Y(a,c,d,e,h){var c=v(c,p,z),i=b(".dw-li",a).eq(c),g=G,e=e?c==h?0.1:Math.abs(0.1*(c-h)):0;t.scroll(a,g,c,e,h,function(){t.temp[g]=i.attr("data-val");t.validate(g,d)})}function D(a,c,b){return $[c]?$[c].apply(a,Array.prototype.slice.call(b,1)):"object"===typeof c?$.init.call(a,c):a}var o={},O,U=function(){},
H,p,z,t,A=(new Date).getTime(),u,K,s,G,x,w,q,h,d,c=document.createElement("modernizr").style,i=P(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),e=function(){var a=["Webkit","Moz","O","ms"],c;for(c in a)if(P([a[c]+"Transform"]))return"-"+a[c].toLowerCase();return""}(),m=b.extend,g="touchstart mousedown",fa={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,showOnFocus:!0,showLabel:!0,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",
preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",scrollLock:!0,formatResult:function(a){return a.join(" ")},parseValue:function(a,c){var b=c.settings.wheels,d=a.split(" "),e=[],h=0,g,i,q;for(g=0;g<b.length;g++)for(i in b[g]){if(void 0!==b[g][i][d[h]])e.push(d[h]);else for(q in b[g][i]){e.push(q);break}h++}return e}},$={init:function(a){void 0===a&&(a={});return this.each(function(){this.id||(A+=1,this.id="scoller"+A);o[this.id]=new E(this,a)})},enable:function(){return this.each(function(){var a=
o[this.id];a&&a.enable()})},disable:function(){return this.each(function(){var a=o[this.id];a&&a.disable()})},isDisabled:function(){var a=o[this[0].id];if(a)return a.settings.disabled},option:function(a,c){return this.each(function(){var b=o[this.id];if(b){var d={};"object"===typeof a?d=a:d[a]=c;b.init(d)}})},setValue:function(a,c,b,d){return this.each(function(){var e=o[this.id];e&&(e.temp=a,e.setValue(!0,c,b,d))})},getInst:function(){return o[this[0].id]},getValue:function(){var a=o[this[0].id];
if(a)return a.values},show:function(){var a=o[this[0].id];if(a)return a.show()},hide:function(){return this.each(function(){var a=o[this.id];a&&a.hide()})},destroy:function(){return this.each(function(){var a=o[this.id];a&&(a.hide(),b(this).unbind(".dw"),delete o[this.id],b(this).is("input")&&(this.readOnly=n(b(this).data("dwro"))))})}};b(document).bind("touchmove mousemove",function(a){u&&(a.preventDefault(),w=Z(a),t.scroll(s,G,v(h+(x-w)/H,p-1,z+1)),d=!0)});b(document).bind("touchend mouseup",function(a){if(u){a.preventDefault();
var c=new Date-q,a=v(h+(x-w)/H,p-1,z+1),e;e=s.offset().top;300>c?(c=(w-x)/c,c=c*c/0.0012,0>w-x&&(c=-c)):c=w-x;if(!c&&!d){e=Math.floor((w-e)/H);var g=b(".dw-li",s).eq(e);g.addClass("dw-hl");setTimeout(function(){g.removeClass("dw-hl")},200)}else e=Math.round(h-c/H);Y(s,e,0,!0,Math.round(a));u=!1;s=null}K&&(clearInterval(O),K=!1);b(".dwb-a").removeClass("dwb-a")});b.fn.mobiscroll=function(a){m(this,b.mobiscroll.shorts);return D(this,a,arguments)};b.mobiscroll=b.mobiscroll||{setDefaults:function(a){m(fa,
a)},presetShort:function(a){this.shorts[a]=function(c){return D(this,m(c,{preset:a}),arguments)}},shorts:{},presets:{},themes:{},i18n:{}};b.scroller=b.scroller||b.mobiscroll;b.fn.scroller=b.fn.scroller||b.fn.mobiscroll})(jQuery);(function(b){var E=b.mobiscroll,P={invalid:[],showInput:!0,inputClass:""},Z=function(n){function v(q,h,d,c){for(var i=0;i<h;){var e=b(".dwwl"+i,q),m=E(c,i,d);b.each(m,function(c,d){b('.dw-li[data-val="'+d+'"]',e).removeClass("dw-v")});i++}}function E(b,h,d){for(var c=0,i=[];c<h;){var e=b[c],m;for(m in d)if(d[m].key==e){d=d[m].children;break}c++}for(c=0;c<d.length;)d[c].invalid&&i.push(d[c].key),c++;return i}function D(b,h,d){var c=0,i,e,m=[{}],g=s;if(h)for(i=0;i<h;i++)m[i]={},m[i][G[i]]={};for(;c<
b.length;){m[c]={};i=m[c];for(var h=G[c],n=g,p={},a=0;a<n.length;)p[n[a].key]=n[a++].value;i[h]=p;i=0;for(h=void 0;i<g.length&&void 0===h;){if(g[i].key==b[c]&&(void 0!==d&&c<=d||void 0===d))h=i;i++}if(void 0!==h&&g[h].children)c++,g=g[h].children;else if((e=o(g))&&e.children)c++,g=e.children;else break}return m}function o(b,h){if(!b)return!1;for(var d=0,c;d<b.length;)if(!(c=b[d++]).invalid)return h?d-1:c;return!1}function O(q,h){b(".dwc",q).css("display","").slice(h).hide()}function U(b,h){var d=
[],c=s,i=0,e=!1,m,g;if(void 0!==b[i]&&i<=h){e=0;m=b[i];for(g=void 0;e<c.length&&void 0===g;)c[e].key==b[i]&&!c[e].invalid&&(g=e),e++}else g=o(c,!0),m=c[g].key;e=void 0!==g?c[g].children:!1;for(d[i]=m;e;){c=c[g].children;i++;if(void 0!==b[i]&&i<=h){e=0;m=b[i];for(g=void 0;e<c.length&&void 0===g;)c[e].key==b[i]&&!c[e].invalid&&(g=e),e++}else g=o(c,!0),g=!1===g?void 0:g,m=c[g].key;e=void 0!==g&&o(c[g].children)?c[g].children:!1;d[i]=m}return{lvl:i+1,nVector:d}}function H(q){var h=[];u=u>K++?u:K;q.children("li").each(function(d){var c=
b(this),i=c.clone();i.children("ul,ol").remove();var i=i.html().replace(/^\s\s*/,"").replace(/\s\s*$/,""),e=c.data("invalid")?!0:!1,d={key:c.data("val")||d,value:i,invalid:e,children:null},c=c.children("ul,ol");c.length&&(d.children=H(c));h.push(d)});K--;return h}var p=b.extend({},P,n.settings),z=b(this),t,A=this.id+"_dummy",u=0,K=0,s=p.wheelArray||H(z),G=function(b){var h=[],d;for(d=0;d<b;d++)h[d]=p.labels&&p.labels[d]?p.labels[d]:d;return h}(u),x=[],w=function(b){for(var h=[],d,c=!0,i=0;c;)if(d=
o(b),h[i++]=d.key,c=d.children)b=d.children;return h}(s),w=D(w,u);b("#"+A).remove();p.showInput&&(t=b('<input type="text" id="'+A+'" value="" class="'+p.inputClass+'" readonly />').insertBefore(z),n.settings.anchor=t,p.showOnFocus&&t.focus(function(){n.show()}));p.wheelArray||z.hide().closest(".ui-field-contain").trigger("create");return{width:50,wheels:w,headerText:!1,onBeforeShow:function(){var b=n.temp;x=n.temp.slice(0);n.settings.wheels=D(b,u,u)},onSelect:function(b){t&&t.val(b)},onChange:function(b){t&&
p.display=="inline"&&t.val(b)},onClose:function(){t&&t.blur()},onAnimStart:function(b){for(var h=n.settings,d=u,c=[];d;)c[--d]=true;c[b]=false;h.readonly=c},validate:function(b,h){var d=n.temp;if(h!==void 0&&x[h]!=d[h]){n.settings.wheels=D(d,null,h);var c=[],i=h,e=U(d,h);for(n.temp=e.nVector.slice(0);i<e.lvl;)c.push(i++);O(b,e.lvl);n.changeWheel(c);x=n.temp.slice(0);v(b,e.lvl,s,n.temp)}else{e=U(d,d.length);v(b,e.lvl,s,d);O(b,e.lvl)}n.settings.readonly=false}}};b.each(["list","image","treelist"],function(b,
v){E.presets[v]=Z;E.presetShort(v)})})(jQuery);
